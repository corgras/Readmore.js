/*!
 * Readmore.js v2.1.0 - JavaScript plugin
 * Author: @RoS (CORGRAS)
 * Project home: https://corgras.github.io/readmore/
 * Github: https://github.com/corgras/Readmore.js
 * Licensed under the MIT license
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof exports?module.exports=t():e.initReadMore=t()}("undefined"!=typeof self?self:this,(function(){"use strict";return function(e,t={}){const r={collapsedHeight:200,speed:100,moreLink:"<span>Read More</span>",lessLink:"<span>Close</span>",breakpoints:{},hideButtonCollapse:!1,animationMode:"js",beforeToggle:null,afterToggle:null,blockProcessed:null};let o,n,s;try{o={...r,...t}}catch(e){console.error("Error merging options:",e),o={...r}}try{if(n=Array.from(document.querySelectorAll(e)),!n.length)throw new Error("Elements not found")}catch(e){return void console.error("Error selecting elements:",e)}const i=()=>{clearTimeout(s),s=setTimeout((()=>{const e=window.innerWidth,t=a(e);n.forEach((e=>d(e,t)))}),100)},a=e=>{try{const t=o.breakpoints,r=Object.keys(t).map(Number).sort(((e,t)=>t-e));for(const n of r)if(e<=n)return{...o,...t[n]};return o}catch(e){return console.error("Error in getOptionsForWidth:",e),o}},d=(e,t)=>{try{e.dataset.readmoreProcessed&&u(e);const r=e.scrollHeight,o=Math.min(t.collapsedHeight,r),n=r>o,s=l(t,n),i=s.querySelector(".cs_readmore-btn");if(c(e,o,t),!n)return e.style.height="auto",e.removeAttribute("aria-hidden"),void(s.style.display="none");m(e,i,t,o),e.nextElementSibling?.classList?.contains("cs_readmore-btn-wrapper")||e.after(s),e.dataset.readmoreProcessed="true",e.setAttribute("aria-expanded","false"),t.blockProcessed?.(e,n)}catch(e){console.error("Error updating element:",e)}},l=(e,t)=>{const r=document.createElement("div");r.classList.add("cs_readmore-btn-wrapper");const o=document.createElement("button");return o.innerHTML=p(e.moreLink),o.classList.add("cs_readmore-btn"),o.type="button",o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls","readmore-"+Math.random().toString(36).substr(2,9)),o.dataset.readmoreBtnToggle="collapsed",r.appendChild(o),t||(r.style.display="none"),r},c=(e,t,r)=>{e.style.overflow="hidden",e.style.height=`${t}px`,e.dataset.readmoreBlockToggle="collapsed",e.setAttribute("role","region"),"css"===r.animationMode?e.classList.add("cs_readmore-animation"):e.style.transition=`height ${r.speed}ms ease-in-out`},m=(e,t,r,o)=>{let n=!1;t.onclick=s=>{s.preventDefault(),n=!n;try{if(r.beforeToggle?.(t,e,n),e.dispatchEvent(new CustomEvent("readmore:beforeToggle")),n){const t=e.cloneNode(!0);t.style.height="auto",t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t);const o=t.scrollHeight;document.body.removeChild(t),e.style.height=`${o}px`,setTimeout((()=>{e.style.height="auto",e.removeAttribute("aria-hidden")}),r.speed)}else e.style.height=`${o}px`,e.setAttribute("aria-hidden","true");t.innerHTML=p(n?r.lessLink:r.moreLink),e.dataset.readmoreBlockToggle=n?"expanded":"collapsed",t.dataset.readmoreBtnToggle=n?"expanded":"collapsed",e.setAttribute("aria-expanded",n.toString()),t.setAttribute("aria-expanded",n.toString()),n&&r.hideButtonCollapse?t.parentElement.style.display="none":t.parentElement.style.display="block",r.afterToggle?.(t,e,n),e.dispatchEvent(new CustomEvent("readmore:afterToggle"))}catch(e){console.error("Error during toggle:",e),n=!n}}},u=e=>{const t=e.nextElementSibling;t?.classList.contains("cs_readmore-btn-wrapper")&&t.remove(),e.style.height="",e.style.transition="",e.style.overflow="",e.classList.remove("cs_readmore-animation"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-hidden"),e.removeAttribute("role"),delete e.dataset.readmoreProcessed,delete e.dataset.readmoreBlockToggle},p=e=>{try{const t=document.createElement("div");return t.innerHTML=e,t.innerHTML.replace(/on\w+="[^"]*"/g,"").replace(/javascript:/g,"")}catch(t){return console.error("Error sanitizing HTML:",t),e}};try{const e=a(window.innerWidth);n.forEach((t=>d(t,e))),window.addEventListener("resize",i)}catch(e){console.error("Error during initialization:",e)}return{destroy:()=>{window.removeEventListener("resize",i),n.forEach(u)}}}}));